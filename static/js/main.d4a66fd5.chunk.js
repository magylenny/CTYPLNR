(this.webpackJsonpuntitled6=this.webpackJsonpuntitled6||[]).push([[0],{261:function(e,t,a){e.exports=a(471)},471:function(e,t,a){"use strict";a.r(t);var n,r,o,i,c=a(0),l=a.n(c),s=a(34),u=a.n(s),m=a(23),p=a(24),d=a(26),h=a(25),g=a(27),b=a(161),y=a(162),f=a(160),v=(a(266),a(82),a(267),a(228)),E=a.n(v),C=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(E.a,{type:"Oval",color:"deepskyblue",height:300,width:300})}}]),t}(l.a.Component),O=a(484),k=a(483),S=a(485),w=a(73),P=a.n(w),D=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t;return"Car"===this.props.method?(e=1,t=l.a.createElement(O.a,{inverted:!0,style:{background:"rgba(36,54,101,0.7)",height:"100%",width:"24vw"}},l.a.createElement(k.a,{inverted:!0},l.a.createElement(k.a.Content,{style:{color:"deepskyblue"}},"Travel times in minutes")),l.a.createElement(S.a,{columns:"equal",style:{width:"22vw",height:"100%"},padded:!0},l.a.createElement(S.a.Column,{style:{background:"navy"}},"0 - ",e),l.a.createElement(S.a.Column,{style:{background:"royalblue"}},e," - ",2*e),l.a.createElement(S.a.Column,{style:{background:"seagreen"}},2*e," - ",3*e),l.a.createElement(S.a.Column,{color:"yellow"},3*e," - ",4*e),l.a.createElement(S.a.Column,{style:{background:"darkorange"}},4*e," - ",5*e),l.a.createElement(S.a.Column,{style:{background:"maroon"}},5*e,"+")))):(e=3,t=l.a.createElement(O.a,{inverted:!0,style:{background:"rgba(36,54,101,0.7)",height:"100%",width:"26.5vw"}},l.a.createElement(k.a,{inverted:!0},l.a.createElement(k.a.Content,{style:{color:"deepskyblue"}},"Travel times in minutes")),l.a.createElement(S.a,{style:{height:"100%"},padded:!0},l.a.createElement(S.a.Column,{style:{background:"navy",width:"3.75vw"}},"0 - ",e),l.a.createElement(S.a.Column,{style:{background:"royalblue",width:"3.75vw"}},e," - ",2*e),l.a.createElement(S.a.Column,{style:{background:"seagreen",width:"3.75vw"}},2*e," - ",3*e),l.a.createElement(S.a.Column,{style:{width:"4.5vw"},color:"yellow"},3*e," - ",4*e),l.a.createElement(S.a.Column,{style:{background:"darkorange",width:"5vw"}},4*e," - ",5*e),l.a.createElement(S.a.Column,{style:{background:"maroon",width:"3.75vw"}},5*e,"+")))),l.a.createElement(P.a,{position:"bottomright"},t)}}]),t}(l.a.Component),T=a(233),N=a(57),j=a.n(N),F=a(478),Z=a(482),x=a(80),G=a(480),z=a(77),J=a.n(z),_=a(154),A=a.n(_),R=a(91),I=[{key:"GP",text:"GP",value:"GP",style:{color:"deepskyblue",background:"#243665",borderColor:"deepskyblue"}},{key:"Primary School",text:"Primary School",value:"PrimarySchool",style:{color:"deepskyblue",background:"#243665",borderColor:"deepskyblue"}},{key:"Secondary School",text:"Secondary School",value:"SecondarySchool",style:{color:"deepskyblue",background:"#243665",borderColor:"deepskyblue"}},{key:"Post Office",text:"Post Office",value:"PostOffice",style:{color:"deepskyblue",background:"#243665",borderColor:"deepskyblue"}},{key:"Shopping Facility",text:"Shopping Facility",value:"ShoppingFacilities",style:{color:"deepskyblue",background:"#243665",borderColor:"deepskyblue"}}],M=[],L={},U=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleOpen=function(){return a.setState({modalOpen:!0})},a.handleFacilityChange=function(e,t){a.setState({addFacility:t.value})},a.handleDataZoneChange=function(e,t){a.setState({addDataZone:t.value})},a.handleClose=function(){a.setState({modalOpen:!1})},a.handleSubmit=function(e){var t,n,r,o,i,c;return j.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:a.setState({modalOpen:!1}),a.state.addDataZone&&a.state.addFacility&&(t=parseInt(a.state.addDataZone.substr(1)),(n=[]).push(L[t]),r=R.multiPolygon([n]),o=A()(r),i=a.getNeighbours(),c=a.getCoordinates(i),a.calculateTravelTimes(o,c,e));case 2:case"end":return l.stop()}}))},a.getNeighbours=function(){var e,t=new Set,n=parseInt(a.state.addDataZone.substr(1));e=L[n];for(var r=-100;r<100;r++){var o=n+r;if(o in L&&"S0"+o!=a.state.addDataZone)for(var i=0;i<e.length;i++)JSON.stringify(L[o]).includes(JSON.stringify(e[i]))&&t.add("S0"+o)}return Array.from(t)},a.getCoordinates=function(e){for(var t,a,n,r=[],o={},i=0;i<e.length;i++){t=e[i];var c=parseInt(t.substr(1));r.push(L[c]),a=R.multiPolygon([r]),n=A()(a),o[t]=n}return o},a.calculateTravelTimes=function(e,t,n){var r,o,i,c,l,s;return j.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:for(s in r=[],i={Car:1,PT:3},(o={})[a.state.addDataZone]=i,c={headers:{"Content-Type":"application/json",Accept:"application/json","X-Application-Id":"4af0386c","X-Api-Key":"2eebb47cc3eba9d697483c016477976e"}},l=function(a){o[a]={};var n={locations:[{id:"Facility",coords:{lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]}},{id:"DataZone centroid",coords:{lat:t[a].geometry.coordinates[1],lng:t[a].geometry.coordinates[0]}}],departure_searches:[{id:"departure search example",departure_location_id:"Facility",arrival_location_ids:["DataZone centroid"],transportation:{type:"driving"},departure_time:"2020-05-20T10:00:00Z",properties:["travel_time","distance","route"]}]};r.push(J.a.post("https://api.traveltimeapp.com/v4/routes",n,c).then((function(e){var t=e.data.results[0].locations[0].properties[0].travel_time/60,n=Math.round(10*t)/10;o[a].Car=n})).catch((function(e){console.log("AXIOS ERROR: ",e.respond)})))},t)l(s);Promise.all(r).then((function(){return a.calculatePTravelTimes(e,t,o,n)}));case 8:case"end":return u.stop()}}))},a.calculatePTravelTimes=function(e,t,n,r){var o,i,c,l;return j.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if("PrimarySchool"!==a.state.addFacility||"SecondarySchool"!==a.state.addFacility){for(l in o=[],i={headers:{"Content-Type":"application/json",Accept:"application/json","X-Application-Id":"cd8dab5e","X-Api-Key":"3b67e6f052bc7121e2f6bcb917024443"}},c=function(a){var r={locations:[{id:"Facility",coords:{lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]}},{id:"DataZone centroid",coords:{lat:t[a].geometry.coordinates[1],lng:t[a].geometry.coordinates[0]}}],departure_searches:[{id:"departure search example",departure_location_id:"Facility",arrival_location_ids:["DataZone centroid"],transportation:{type:"public_transport"},departure_time:"2020-05-20T10:00:00Z",properties:["travel_time","distance","route"]}]};o.push(J.a.post("https://api.traveltimeapp.com/v4/routes",r,i).then((function(e){var t=e.data.results[0].locations[0].properties[0].travel_time/60,r=Math.round(10*t)/10;n[a].PT=r})).catch((function(e){console.log("AXIOS ERROR: ",e.response)})))},t)c(l);Promise.all(o).then((function(){return a.checkChanges(n,r)}))}case 1:case"end":return s.stop()}}))},a.checkChanges=function(e,t){var n,r,o,i,c,l,s,u,m;return j.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:for(r in n={DataZone:a.translateToName(a.state.addDataZone,t),Facility:a.parseToString(a.state.addFacility),NeighbouringDataZones:[]},e){for(o={},i="",c=void 0,l=void 0,s=0;s<t.features.length;s++)[],t.features[s].properties.DataZone===r&&(t.features[s].properties.CarTravelTimes[a.state.addFacility]>e[r].Car&&(c=(c=1-(c=e[r].Car/t.features[s].properties.CarTravelTimes[a.state.addFacility])).toFixed(2),i=t.features[s].properties.CarTravelTimes[a.state.addFacility]+" => "+e[r].Car+" ("+(100*c).toFixed(0)+"%)",o.CarChanges=i,t.features[s].properties.CarTravelTimes[a.state.addFacility]=e[r].Car),t.features[s].properties.PublicTransportTravelTimes[a.state.addFacility]>e[r].PT&&(l=(l=1-(l=e[r].PT/t.features[s].properties.PublicTransportTravelTimes[a.state.addFacility])).toFixed(2),i=t.features[s].properties.PublicTransportTravelTimes[a.state.addFacility]+" => "+e[r].PT+" ("+(100*l).toFixed(0)+"%)",o.PTChanges=i,t.features[s].properties.PublicTransportTravelTimes[a.state.addFacility]=e[r].PT));u=a.translateToName(r,t),m=Object(T.a)({},u,o),Object.keys(m[u]).length>0&&n.NeighbouringDataZones.push(m)}a.setState({listitems:a.state.listitems.concat(n)}),a.props.parentCallback(t),a.props.parentCallbackSumbit(a.state.listitems);case 5:case"end":return p.stop()}}))},a.translateToName=function(e,t){for(var a=0;a<t.features.length;a++)if(t.features[a].properties.DataZone===e)return t.features[a].properties.Name},a.parseToString=function(e){switch(e){case"GP":return"GP";case"PrimarySchool":return"Primary School";case"SecondarySchool":return"Secondary School";case"PostOffice":return"Post Office";case"ShoppingFacilities":return"Shopping Facility"}},a.populateDropdown=function(e){var t,a;M=[];for(var o=0;o<e.features.length;o++)n=e.features[o].properties,r=n.Name+" ("+n.DataZone+")",M[o]={key:r,text:r,value:n.DataZone,style:{color:"deepskyblue",background:"#243665",borderColor:"deepskyblue"}},t=parseInt(n.DataZone.substr(1)),a=e.features[o].geometry.coordinates[0],L[t]=a;return M},a.state={modalOpen:!1,addFacility:"",addDataZone:"",listitems:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.geo;return l.a.createElement(P.a,{position:"topright"},l.a.createElement(F.a,{size:"tiny",trigger:l.a.createElement(Z.a,{onClick:this.handleOpen,style:{color:"deepskyblue",background:"#243665"},circular:!0,icon:!0}," ",l.a.createElement(x.a,{name:"plus",size:"large"}),"   "),onClose:this.handleClose,open:this.state.modalOpen},l.a.createElement(F.a.Header,{className:"modalHeader"},l.a.createElement("p",null,"Adding facility")),l.a.createElement(F.a.Content,{className:"modalContent"},l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,{className:"modalDropdown",placeholder:"Select Facility",fluid:!0,selection:!0,onChange:this.handleFacilityChange,options:I}),l.a.createElement("br",null),l.a.createElement(G.a,{className:"modalDropdown",placeholder:"Select Data Zone",fluid:!0,search:!0,selection:!0,onChange:this.handleDataZoneChange,options:this.populateDropdown(t)}))),l.a.createElement(F.a.Actions,{className:"modalAction"},l.a.createElement(Z.a,{className:"modalButton",onClick:function(){return e.handleSubmit(t)},positive:!0,labelPosition:"right",icon:"checkmark",content:"Done"}))))}}]),t}(l.a.Component),B=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.activeDomains;return e="Car"===this.props.method,l.a.createElement("div",{className:"side-bar-container"},e?l.a.createElement("div",null,l.a.createElement(Z.a.Group,{inverted:!0,vertical:!0,icon:!0,color:"blue",size:"big",className:"side-bar"},l.a.createElement(Z.a,{active:a.City,icon:!0,onClick:function(){return t.props.changeDomain("City")}},l.a.createElement(x.a,{name:"globe",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"City",l.a.createElement("br",null),"Map"),l.a.createElement(Z.a,{active:a.GP,icon:!0,onClick:function(){return t.props.changeDomain("GP")}},l.a.createElement(x.a,{name:"doctor",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"GPs"),l.a.createElement(Z.a,{active:a.PrimarySchool,icon:!0,onClick:function(){return t.props.changeDomain("PrimarySchool")}},l.a.createElement(x.a,{name:"building",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"Primary",l.a.createElement("br",null)," Schools"),l.a.createElement(Z.a,{active:a.SecondarySchool,icon:!0,onClick:function(){return t.props.changeDomain("SecondarySchool")}},l.a.createElement(x.a,{name:"building",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"Secondary",l.a.createElement("br",null),"Schools"),l.a.createElement(Z.a,{active:a.PostOffice,icon:!0,onClick:function(){return t.props.changeDomain("PostOffice")}},l.a.createElement(x.a,{name:"envelope",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"Post",l.a.createElement("br",null)," Offices"),l.a.createElement(Z.a,{active:a.ShoppingFacilities,icon:!0,onClick:function(){return t.props.changeDomain("ShoppingFacilities")}},l.a.createElement(x.a,{name:"shop",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"Shopping",l.a.createElement("br",null)," Facilities")),l.a.createElement("div",{className:"restnormal"},l.a.createElement("div",{className:"footer"},l.a.createElement("p",null,"Leonard Magyar - University of Strathcylde 2019/2020")))):l.a.createElement("div",null,l.a.createElement(Z.a.Group,{inverted:!0,vertical:!0,icon:!0,color:"blue",size:"big",className:"side-bar"},l.a.createElement(Z.a,{active:a.City,icon:!0,onClick:function(){return t.props.changeDomain("City")}},l.a.createElement(x.a,{name:"globe",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"City",l.a.createElement("br",null),"Map"),l.a.createElement(Z.a,{active:a.GP,icon:!0,onClick:function(){return t.props.changeDomain("GP")}},l.a.createElement(x.a,{name:"doctor",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"GPs"),l.a.createElement(Z.a,{active:a.PostOffice,icon:!0,onClick:function(){return t.props.changeDomain("PostOffice")}},l.a.createElement(x.a,{name:"envelope",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"Post",l.a.createElement("br",null)," Offices"),l.a.createElement(Z.a,{active:a.ShoppingFacilities,icon:!0,onClick:function(){return t.props.changeDomain("ShoppingFacilities")}},l.a.createElement(x.a,{name:"shop",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"Shopping",l.a.createElement("br",null)," Facilities")),l.a.createElement("div",{className:"rest"},l.a.createElement("div",{className:"footerrest"},l.a.createElement("p",null,"Leonard Magyar - University of Strathcylde 2019/2020")))))}}]),t}(l.a.Component),X=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(S.a.Column,{textAlign:"center",className:"title"},l.a.createElement("div",{className:"header-text"},l.a.createElement("p",null,"City Planner")),l.a.createElement("div",{className:"header-icon"},l.a.createElement(x.a,{inverted:!0,name:"pen square",color:"blue",size:"huge"})))}}]),t}(l.a.Component),H=(a(463),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){var t=new FileReader;t.onload=a.onReaderLoad,t.readAsText(e.target.files[0])},a.onReaderLoad=function(e){console.log(JSON.parse(e.target.result)),a.props.gettingImportedJson(JSON.parse(e.target.result))},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(e){var t=this;return l.a.createElement("div",null,l.a.createElement(Z.a.Group,{inverted:!0,vertical:!0,color:"blue"},l.a.createElement(Z.a,{icon:!0,labelPosition:"left",as:"label",htmlFor:"file",type:"button"},l.a.createElement(x.a,{name:"upload"}),"Import"),l.a.createElement("input",{type:"file",accept:"application/JSON",id:"file",style:{visibility:"hidden"},onChange:this.onChange}),l.a.createElement(Z.a,{icon:!0,labelPosition:"left",onClick:function(){var e,a,n,r;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(t.props.geoJSON),e="CityPlanner_GeoJSON",a=new Blob([JSON.stringify(t.props.geoJSON)],{type:"application/json"}),o.next=5,j.a.awrap(URL.createObjectURL(a));case 5:n=o.sent,(r=document.createElement("a")).href=n,r.download=e+".json",document.body.appendChild(r),r.click(),document.body.removeChild(r);case 12:case"end":return o.stop()}}))}},l.a.createElement(x.a,{name:"download"}),"Export")))}}]),t}(c.Component)),q=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).gettingImported=function(e){a.props.parentCallback(e)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t,a=this;return e="Glasgow"===this.props.city,t="Car"===this.props.method,l.a.createElement("div",{className:"header"},l.a.createElement(S.a,null,l.a.createElement(S.a.Column,{width:2},l.a.createElement("div",{className:"methodButtons"},l.a.createElement(Z.a.Group,{inverted:!0,size:"medium",color:"blue"},l.a.createElement(Z.a,{active:t,icon:!0,onClick:function(){return a.props.changeMethod("Car")}},l.a.createElement(x.a,{name:"car",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null)," Car"),l.a.createElement(Z.a.Or,null),l.a.createElement(Z.a,{active:!t,icon:!0,onClick:function(){return a.props.changeMethod("PublicTransport")}},l.a.createElement(x.a,{name:"bus",size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),"Public Transport")))),l.a.createElement(S.a.Column,{width:5},l.a.createElement("div",{className:"importButtons"},l.a.createElement(H,{gettingImportedJson:this.gettingImported,geoJSON:this.props.geoJSON}))),l.a.createElement(S.a.Column,{width:5},l.a.createElement(X,null)),l.a.createElement(S.a.Column,{textAlign:"right",width:4},l.a.createElement("div",{className:"cityButtons"},l.a.createElement(Z.a.Group,{inverted:!0,size:"huge",color:"blue"},l.a.createElement(Z.a,{active:e,onClick:function(){return a.props.changeCity("Glasgow")}},"Glasgow"),l.a.createElement(Z.a.Or,null),l.a.createElement(Z.a,{active:!e,onClick:function(){return a.props.changeCity("Edinburgh")}},"Edinburgh"))))))}}]),t}(l.a.Component),K=a(481),Y=a(249),Q=a.n(Y),V=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).populateContents=function(e){for(var t=[],a=0;a<e.length;a++){for(var n="",r=0;r<Object.keys(e[a].NeighbouringDataZones).length;r++){var o=void 0,i=void 0,c=Object.keys(e[a].NeighbouringDataZones[r]);"CarChanges"in e[a].NeighbouringDataZones[r][c]&&(o="Car: "+e[a].NeighbouringDataZones[r][c].CarChanges),"PTChanges"in e[a].NeighbouringDataZones[r][c]&&(i="Public Transport: "+e[a].NeighbouringDataZones[r][c].PTChanges);var l=c+"\n";n+=l,o&&(n+=l=o+"\n"),i&&(n+=l=i+"\n\n")}t.push(n)}return console.log(t.toString()),t},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.changes,t=this.populateContents(e),a=Q.a.times(e.length,(function(a){return{key:"panel-".concat(a),title:e[a].Facility.concat(" in "+e[a].DataZone),content:{content:t[a]}}}));return l.a.createElement(P.a,null,l.a.createElement(O.a,{inverted:!0,style:{background:"rgba(36,54,101,0.7)",height:"57vh",width:"14vw"}},"Facilites recently added:",l.a.createElement(K.a,{style:{overflow:"auto",maxHeight:375},className:"accordion",exclusive:!1,panels:a,styled:!0,fluid:!0})))}}]),t}(l.a.Component),W=(a(465),a(9)),$=a.n(W);a(466)({presets:["es2015","react"]}),delete $.a.Icon.Default.prototype._getIconUrl,$.a.Icon.Default.mergeOptions({iconRetinaUrl:a(468),iconUrl:a(469),shadowUrl:a(470)});var ee=0,te=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).geoJSONRef=l.a.createRef(),a.callbackFunction=function(e){a.geoJSONRef.current.leafletElement.clearLayers(),a.geoJSONRef.current.leafletElement.addData(e),a.setState({geo:e})},a.callbackFunctionSubmit=function(e){a.setState({changesList:e})},a.getGlasgow=function(){},a.changeMethod=function(e){"PublicTransport"!==e||"PrimarySchool"!==a.state.domain&&"SecondarySchool"!==a.state.domain||a.changeDomain("City"),a.setState({method:e})},a.changeDomain=function(e){var t=Object.assign({},a.state);t.activeDomains[a.state.domain]=!1,t.domain=e,t.activeDomains[t.domain]=!0,a.setState(t)},a.changeCity=function(e){var t="";t="Glasgow"===e?"https://api.npoint.io/aa3a9094c684db09d0f8":"https://api.npoint.io/f7c3649ae02eea7f5e92",a.setState({isFetching:!0}),J.a.get(t).then((function(t){a.setState({isFetching:!1,geo:t.data,city:e})})),!0},a.state={isFetching:!0,geo:[],domain:"City",method:"Car",city:"Glasgow",changesList:[],activeDomains:{City:!0,GP:!1,PrimarySchool:!1,SecondarySchool:!1,PostOffice:!1,ShoppingFacilities:!1}},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="CTYPLNR",this.setState({isFetching:!0}),J.a.get("https://api.npoint.io/aa3a9094c684db09d0f8").then((function(t){e.setState({isFetching:!1,geo:t.data,domain:"City"})}))}},{key:"render",value:function(){var e,t=this.state,a=t.isFetching,n=t.geo,r=t.domain,c=t.method;return"Glasgow"===t.city?(o=[55.8595,-4.2518],i=12):(o=[55.933251,-3.268267],i=12),e=a?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(C,null)):l.a.createElement(b.a,{className:"map",minZoom:i,center:o,zoom:i},l.a.createElement(y.a,{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l.a.createElement(U,{geo:this.state.geo,parentCallback:this.callbackFunction,parentCallbackSumbit:this.callbackFunctionSubmit}),l.a.createElement(V,{changes:this.state.changesList}),l.a.createElement(D,{method:this.state.method}),l.a.createElement(f.a,{data:n,ref:this.geoJSONRef,style:function(e){e.properties.CarTravelTimes.GP;var t;if("City"===r)return{color:"black",weight:1.5,fillOpacity:.4};"Car"===c?(ee=e.properties.CarTravelTimes[r],t=1):(ee=e.properties.PublicTransportTravelTimes[r],t=3);return ee>=0&&ee<t?{color:"navy",weight:1.5}:ee>=t&&ee<2*t?{color:"royalblue",weight:1.5,fillOpacity:.5}:ee>=2*t&&ee<3*t?{color:"seagreen",weight:1.5,fillOpacity:.5}:ee>=3*t&&ee<4*t?{color:"yellow",weight:1.5,fillOpacity:.5}:ee>=4*t&&ee<5*t?{color:"orange",weight:1.5,fillOpacity:.5}:ee>=5*t?{color:"maroon",weight:1.5,fillOpacity:.5}:{color:"white",weight:1.5,fillOpacity:.75}},onEachFeature:function(e,t){t.bindPopup("Name: "+e.properties.Name+"<br>DataCode: "+e.properties.DataZone)}})),l.a.createElement("div",{className:"main"},l.a.createElement(q,{geoJSON:this.state.geo,city:this.state.city,method:this.state.method,changeMethod:this.changeMethod,changeCity:this.changeCity,parentCallback:this.callbackFunction}),e,l.a.createElement(B,{method:this.state.method,changeDomain:this.changeDomain,activeDomains:this.state.activeDomains}))}}]),t}(l.a.Component);u.a.render(l.a.createElement(te,null),document.getElementById("root"))},82:function(e,t,a){}},[[261,1,2]]]);
//# sourceMappingURL=main.d4a66fd5.chunk.js.map